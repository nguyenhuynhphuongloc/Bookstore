# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type User {
  id: ID!
  username: String!
  email: String!
  role: String!
  avatarUrl: String
  refreshTokens: String
}

type Cart {
  id: Int!
  totalPrice: Float!
  user: User!
  items: [CartItem]!
}

type CartItem {
  id: Int!
  cart: Cart!
  book: Book!
  quantity: Int!
  cartId: Int!
  bookId: Int!
}

type Book {
  id: ID!
  title: String!
  subtitle: String
  authors: String!
  categories: String
  thumbnail: String
  description: String
  published_year: Int
  average_rating: Float
  num_pages: Int
  ratings_count: Int
  price: Float!
  id_stripe: String
}

type PaginatedBooks {
  data: [Book!]!
  total: Int!
  totalPages: Int!
  currentPage: Int!
}

type Query {
  getCartByUser(userId: String!): Cart!
  books: [Book!]!
  book(id: ID!): Book
  searchBooksByTitle(searchTerm: String!): [Book!]!
  booksByCategoryName(categoryName: String!, limit: Int): [Book!]!
  getTopRatedBooks(limit: Int! = 15): [Book!]!
  booksByCategory(categoryName: String!, page: Int, limit: Int): PaginatedBooks!
}

type Mutation {
  createUser(input: CreateUserDto!): User!
  createCart(createCartInput: String!): Cart!
  addCartItem(cartId: ID, userId: ID!, bookId: ID!, quantity: Int! = 1): CartItem!
  createBook(createBookInput: CreateBookInput!): Book!
  updateBook(updateBookInput: UpdateBookInput!): Book!
  removeBook(isbn10: String!): Book!
  importBooksFromCSV(filePath: String!): [Book!]!
}

input CreateUserDto {
  username: String!
  password: String!
  email: String!
}

input CreateBookInput {
  title: String!
  subtitle: String
  authors: String!
  categories: String
  thumbnail: String
  description: String
  published_year: Int
  average_rating: Float
  num_pages: Int
  ratings_count: Int
  price: Float
}

input UpdateBookInput {
  title: String
  subtitle: String
  authors: String
  categories: String
  thumbnail: String
  description: String
  published_year: Int
  average_rating: Float
  num_pages: Int
  ratings_count: Int
  price: Float
  isbn10: Int!
}