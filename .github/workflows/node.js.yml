name: Frontend CI

on:
  push:
    branches: ["main"]
  pull_request:
    branches: ["main"]

jobs:
  build-frontend:
    runs-on: ubuntu-latest

    strategy:
      matrix:
        node-version: [18.x] # B·∫°n c√≥ th·ªÉ th√™m 20.x n·∫øu mu·ªën test th√™m version

    steps:
      # 1Ô∏è‚É£ Clone code t·ª´ repo
      - name: Checkout repository
        uses: actions/checkout@v4

      # 2Ô∏è‚É£ C√†i ƒë√∫ng Node.js version v√† b·∫≠t cache npm
      - name: Use Node.js ${{ matrix.node-version }}
        uses: actions/setup-node@v4
        with:
          node-version: ${{ matrix.node-version }}
          cache: 'npm'
          cache-dependency-path: frontend/package-lock.json  # üí° CH·ªà R√ï FILE LOCK TRONG FRONTEND

      # 3Ô∏è‚É£ C√†i dependencies trong th∆∞ m·ª•c frontend
      - name: Install dependencies
        working-directory: frontend
        run: npm ci

      # 4Ô∏è‚É£ Build project (n·∫øu c√≥ script build)
      - name: Build frontend
        working-directory: frontend
        run: npm run build --if-present

      # 5Ô∏è‚É£ Ch·∫°y test (n·∫øu c√≥ script test)
      - name: Run tests
        working-directory: frontend
        run: npm test
